security_scan:
  stage: test
  script:
    - echo "üîç Starting Security Scan..."
    # Update packages and install dependencies
    - apt-get update && apt-get install -y curl unzip tar gnupg
    # Install Node.js (example: Node 18)
    - curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
    - apt-get install -y nodejs
    # Verify installation
    - node -v
    - npm -v
    # Run your security scan
    - npm install
    - node index.js
    - echo "‚úÖ Scan complete."
  artifacts:
    paths:
      - scan-results.json
    expire_in: 7 days
  cache:
    key: npm-cache-$CI_COMMIT_REF_SLUG
    paths:
      - node_modules/
  rules:
    - when: always
